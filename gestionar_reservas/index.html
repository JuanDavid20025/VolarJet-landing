<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>VolarJet ¬∑ Gesti√≥n de Reservas</title>
    <meta name="color-scheme" content="light" />

    <!-- CSS global -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!-- CSS de la vista -->
    <link rel="stylesheet" href="css/gestionar_reservas.css">
</head>

<body>

    <!-- ===== NAVBAR ===== -->
    <header>
        <div class="container nav">
            <div class="brand">
                <img id="vjLogo" src="../../assets/img/logo.png" alt="VolarJet" />
                <div class="brand-title"></div>
            </div>
            <nav class="menu" aria-label="principal">
                <a href="#">Inicio</a><a href="#">Reservar</a><a href="#">Check-in</a>
                <a href="#">Gestionar</a><a href="#">Estado de vuelo</a><a href="#">Ofertas</a>
            </nav>
            <div class="actions">
                <button class="btn btn-ghost" onclick="location.reload()">Actualizar</button>
                <button class="btn btn-cta" id="btnNueva">Nueva reserva</button>
            </div>
        </div>
    </header>

    <!-- ===== PAGE HEADER ===== -->
    <section class="container page-head">
        <div class="breadcrumbs">
            <a href="#">Panel</a> ¬∑ <span>Reservas</span>
        </div>
        <h1>Gesti√≥n de reservas</h1>
        <p>Busca, filtra, edita, asigna asiento, realiza check-in, exporta CSV o cancela reservas.</p>
    </section>

    <!-- ===== TOOLBAR / FILTROS ===== -->
    <section class="container card">
        <div class="card-body">
            <form id="filters" class="toolbar" onsubmit="return false;">
                <div class="field">
                    <label for="q">PNR / Pasajero</label>
                    <input id="q" type="text" placeholder="ABC123, Juan P√©rez‚Ä¶" />
                </div>
                <div class="field">
                    <label for="fOri">Origen</label>
                    <select id="fOri">
                        <option value="">Todos</option>
                        <option>BOG</option>
                        <option>MDE</option>
                        <option>CTG</option>
                        <option>CLO</option>
                        <option>SMR</option>
                    </select>
                </div>
                <div class="field">
                    <label for="fDes">Destino</label>
                    <select id="fDes">
                        <option value="">Todos</option>
                        <option>BOG</option>
                        <option>MDE</option>
                        <option>CTG</option>
                        <option>CLO</option>
                        <option>SMR</option>
                    </select>
                </div>
                <div class="field">
                    <label for="fDesde">Desde</label>
                    <input id="fDesde" type="date" />
                </div>
                <div class="field">
                    <label for="fHasta">Hasta</label>
                    <input id="fHasta" type="date" />
                </div>
                <div class="field">
                    <label for="fEstado">Estado</label>
                    <select id="fEstado">
                        <option value="">Todos</option>
                        <option value="confirmada">Confirmada</option>
                        <option value="pendiente">Pendiente</option>
                        <option value="checkin">Check-in</option>
                        <option value="volada">Volada</option>
                        <option value="cancelada">Cancelada</option>
                    </select>
                </div>
                <div class="field">
                    <label for="fCanal">Canal</label>
                    <select id="fCanal">
                        <option value="">Todos</option>
                        <option>Web</option>
                        <option>App</option>
                        <option>Agencia</option>
                    </select>
                </div>
                <span class="spacer"></span>
                <button id="btnExport" class="btn btn-line" type="button">‚¨áÔ∏è Exportar CSV</button>
                <button id="btnCancelSel" class="btn btn-danger" type="button" title="Cancelar seleccionadas">üóëÔ∏è
                    Cancelar</button>
            </form>
        </div>
    </section>

    <!-- ===== TABLA ===== -->
    <section class="container card" style="margin-top:12px;">
        <div class="card-body">
            <div class="table-wrap">
                <table id="tabla">
                    <thead>
                        <tr>
                            <th style="width:36px;"><input type="checkbox" id="checkAll" /></th>
                            <th class="sortable" data-k="pnr">PNR</th>
                            <th class="sortable" data-k="pasajero">Pasajero</th>
                            <th>Vuelo</th>
                            <th>Ruta</th>
                            <th class="sortable" data-k="salida">Salida</th>
                            <th>Asiento</th>
                            <th>Tarifa</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                </table>
            </div>

            <!-- Paginaci√≥n -->
            <div
                style="display:flex; justify-content:space-between; align-items:center; margin-top:12px; gap:12px; flex-wrap:wrap;">
                <div class="page-size">
                    <label for="pageSize">Filas por p√°gina</label>
                    <select id="pageSize">
                        <option>10</option>
                        <option selected>25</option>
                        <option>50</option>
                        <option>100</option>
                    </select>
                </div>
                <div class="pagination" id="pagination"></div>
            </div>
        </div>
    </section>

    <!-- ===== MODAL: VER / EDITAR RESERVA ===== -->
    <dialog id="modalReserva">
        <form method="dialog" id="formReserva">
            <div class="modal-head">
                <strong id="modalTitle">Reserva</strong>
                <button class="icon-btn" value="cancel" type="submit" title="Cerrar">‚úñ</button>
            </div>
            <div class="modal-body">
                <div class="grid">
                    <div class="field"><label>PNR</label><input id="rPNR" required readonly /></div>
                    <div class="field"><label>Pasajero</label><input id="rPasajero" required /></div>
                    <div class="field"><label>Documento</label><input id="rDoc" /></div>
                    <div class="field"><label>Correo</label><input id="rEmail" type="email" /></div>
                    <div class="field"><label>Tel√©fono</label><input id="rTel" /></div>
                    <div class="field"><label>Canal</label>
                        <select id="rCanal">
                            <option>Web</option>
                            <option>App</option>
                            <option>Agencia</option>
                        </select>
                    </div>
                    <div class="field"><label>Origen</label>
                        <select id="rOri">
                            <option>BOG</option>
                            <option>MDE</option>
                            <option>CTG</option>
                            <option>CLO</option>
                            <option>SMR</option>
                        </select>
                    </div>
                    <div class="field"><label>Destino</label>
                        <select id="rDes">
                            <option>BOG</option>
                            <option>MDE</option>
                            <option>CTG</option>
                            <option>CLO</option>
                            <option>SMR</option>
                        </select>
                    </div>
                    <div class="field"><label>Vuelo</label><input id="rVuelo" placeholder="VJ123" /></div>
                    <div class="field"><label>Fecha</label><input id="rFecha" type="date" /></div>
                    <div class="field"><label>Hora</label><input id="rHora" type="time" /></div>
                    <div class="field"><label>Asiento</label><input id="rAsiento" placeholder="12C" /></div>
                    <div class="field"><label>Tarifa</label>
                        <select id="rTarifa">
                            <option>Economy</option>
                            <option>Flex</option>
                            <option>Plus</option>
                            <option>Business</option>
                        </select>
                    </div>
                    <div class="field"><label>Clase</label>
                        <select id="rClase">
                            <option>Y</option>
                            <option>M</option>
                            <option>J</option>
                        </select>
                    </div>
                    <div class="field"><label>Estado</label>
                        <select id="rEstado">
                            <option value="confirmada">Confirmada</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="checkin">Check-in</option>
                            <option value="volada">Volada</option>
                            <option value="cancelada">Cancelada</option>
                        </select>
                    </div>
                    <div class="field" style="grid-column:1/-1"><label>Observaciones</label><input id="rObs"
                            placeholder="(opcional)" /></div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-ghost" value="cancel" type="submit">Cerrar</button>
                <button class="btn btn-cta" id="btnSaveReserva" value="default" type="submit">Guardar</button>
            </div>
        </form>
    </dialog>

    <!-- ===== MODAL: ASIGNAR ASIENTO ===== -->
    <dialog id="modalAsiento">
        <form method="dialog" id="formAsiento">
            <div class="modal-head">
                <strong>Asignar asiento</strong>
                <button class="icon-btn" value="cancel" type="submit" title="Cerrar">‚úñ</button>
            </div>
            <div class="modal-body">
                <div id="seatInfo" class="muted">‚Äî</div>
                <div class="seatmap" id="seatmap" style="margin-top:10px;"></div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-ghost" value="cancel" type="submit">Cancelar</button>
                <button class="btn btn-cta" id="btnAsignar" value="default" type="submit">Asignar</button>
            </div>
        </form>
    </dialog>

    <!-- ===== MODAL: CONFIRMAR CANCELACI√ìN ===== -->
    <dialog id="modalCancel">
        <form method="dialog" id="formCancel">
            <div class="modal-head">
                <strong>Cancelar reserva</strong>
                <button class="icon-btn" value="cancel" type="submit" title="Cerrar">‚úñ</button>
            </div>
            <div class="modal-body">
                <p class="danger-box"><b>‚ö†Ô∏è Acci√≥n irreversible.</b> La reserva pasar√° a estado <b>Cancelada</b>.</p>
                <div class="grid">
                    <div class="field"><label>Motivo</label>
                        <select id="cMotivo">
                            <option>Solicitud del cliente</option>
                            <option>Pago rechazado</option>
                            <option>Irregularidad operativa</option>
                        </select>
                    </div>
                    <div class="field"><label>Reembolso</label>
                        <select id="cRefund">
                            <option>Sin reembolso</option>
                            <option>Reembolso total</option>
                            <option>Reembolso parcial</option>
                        </select>
                    </div>
                    <div class="field" style="grid-column:1/-1"><label>Notas</label><input id="cNotas"
                            placeholder="(opcional)" /></div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-ghost" value="cancel" type="submit">Cerrar</button>
                <button class="btn btn-danger" id="btnDoCancel" value="default" type="submit">Cancelar reserva</button>
            </div>
        </form>
    </dialog>

    <!-- ===== FOOTER ===== -->
    <footer>
        <div class="container foot">
            <div>
                <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
                    <img id="vjLogo2" src="../../assets/img/logo.png" alt="VolarJet" style="height:40px;width:auto" />
                    <b></b>
                </div>
                <p class="muted">Admin de reservas r√°pida y clara para tu equipo.</p>
            </div>
            <div>
                <b>Compa√±√≠a</b>
                <ul style="list-style:none; padding:0; margin:8px 0 0;">
                    <li><a href="#">Nosotros</a></li>
                    <li><a href="#">Prensa</a></li>
                    <li><a href="#">Empleos</a></li>
                </ul>
            </div>
            <div>
                <b>Ayuda</b>
                <ul style="list-style:none; padding:0; margin:8px 0 0;">
                    <li><a href="#">Soporte</a></li>
                    <li><a href="#">Pol√≠ticas</a></li>
                    <li><a href="#">Reportar un problema</a></li>
                </ul>
            </div>
            <div>
                <b>Legal</b>
                <ul style="list-style:none; padding:0; margin:8px 0 0;">
                    <li><a href="#">T√©rminos</a></li>
                    <li><a href="#">Privacidad</a></li>
                    <li><a href="#">Cookies</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <div class="toast" id="toast">Listo</div>

    <!-- JS global -->
    <script type="module" src="../../assets/js/main.js"></script>
    <!-- JS de la vista -->
    <script type="module" src="js/gestionar_reservas.js"></script>
</body>

</html>