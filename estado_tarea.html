<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VolarJet — CP-02 Gestión de Tareas (Standalone)</title>
    <!-- ✨ CSS propio: NO requiere Tailwind ni librerías -->
    <style>
        :root {
            --bg: #f6f8fb;
            --card: #ffffff;
            --ink: #0f172a;
            --muted: #5b657a;
            --ring: #d7deea;
            --sky: #0ea5e9;
            --sky-700: #0369a1;
            --emerald: #10b981;
            --rose: #ef4444;
            --amber: #f59e0b;
            --shadow: 0 10px 25px rgba(0, 0, 0, .06);
            --radius: 16px;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            color: var(--ink);
            background: linear-gradient(180deg, #fbfcff, var(--bg));
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 32px 20px;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px
        }

        header h1 {
            margin: 0;
            font-size: 28px;
            letter-spacing: -.2px
        }

        header p {
            margin: 6px 0 0;
            color: var(--muted);
            font-size: 13px
        }

        header img {
            height: 72px;
            width: auto;
            border-radius: 8px;
            border: 1px solid var(--ring);
            background: #fff
        }

        .card {
            background: var(--card);
            border: 1px solid var(--ring);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .card .body {
            padding: 22px
        }

        .row {
            display: grid;
            gap: 14px
        }

        @media(min-width:900px) {
            .row.cols-5 {
                grid-template-columns: 2fr 1fr 1fr 1fr 1fr
            }
        }

        @media(min-width:900px) {
            .row.cols-4 {
                grid-template-columns: 2fr 1fr 1fr 1fr
            }
        }

        .titlebar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px
        }

        .titlebar h2 {
            margin: 0;
            font-size: 18px
        }

        .muted {
            color: var(--muted);
            font-size: 12px
        }

        label {
            display: block;
            font-size: 13px;
            color: #42506a
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--ring);
            border-radius: 12px;
            background: #fff;
            outline: none;
            font-size: 14px
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--sky);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, .18)
        }

        textarea {
            resize: vertical
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            height: 40px;
            padding: 0 16px;
            border-radius: 12px;
            border: 0;
            cursor: pointer;
            font-weight: 600
        }

        .btn-primary {
            background: var(--sky);
            color: #fff
        }

        .btn-primary:hover {
            background: var(--sky-700)
        }

        .btn-ghost {
            background: transparent;
            color: var(--sky-700)
        }

        .btn-muted {
            background: #e9eef7;
            color: #384864
        }

        .table-head {
            display: grid;
            grid-template-columns: 5fr 2fr 2fr 2fr 1fr;
            padding: 8px 12px;
            color: var(--muted);
            font-size: 12px
        }

        .table-row {
            display: grid;
            grid-template-columns: 5fr 2fr 2fr 2fr 1fr;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 12px
        }

        .table-row:hover {
            background: #f3f7ff
        }

        .id {
            font-size: 12px;
            color: var(--muted)
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 3px 8px;
            border-radius: 999px;
            font-size: 11px;
            border: 1px solid
        }

        .b-pend {
            background: #fff7ed;
            color: #92400e;
            border-color: #fed7aa
        }

        .b-proc {
            background: #ecfeff;
            color: #075985;
            border-color: #bae6fd
        }

        .b-cerr {
            background: #ecfdf5;
            color: #065f46;
            border-color: #bbf7d0
        }

        .toast {
            position: fixed;
            top: 18px;
            right: 18px;
            z-index: 50;
            background: #fff;
            border: 1px solid var(--ring);
            border-radius: 14px;
            box-shadow: var(--shadow);
            padding: 10px 14px;
            display: none;
            align-items: center;
            gap: 8px
        }

        .toast.show {
            display: flex
        }

        .toast.ok {
            border-color: #bfe9d3
        }

        .toast.warn {
            border-color: #ffd2d2
        }

        .error {
            color: var(--rose);
            font-size: 12px;
            margin-top: 4px;
            display: none
        }

        .error.show {
            display: block
        }

        .actions {
            display: inline-flex;
            gap: 8px;
            justify-content: flex-end
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div>
                <h1>VolarJet — Gestión de Tareas</h1>
                <p class="muted">CP-02 · Evidencias por interfaz (standalone sin dependencias)</p>
            </div>
            <!-- Logo ruta relativa que pediste -->
            <img src="../../assets/img/logo.png" alt="VolarJet" />
        </header>

        <!-- Formulario / Edición -->
        <section class="card" id="formCard">
            <div class="body">
                <div class="titlebar">
                    <h2 id="formTitle">Nueva tarea</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="saveBtn">Guardar</button>
                        <button class="btn btn-primary" id="saveEditBtn"
                            style="display:none; background:var(--emerald)">Guardar cambios</button>
                        <button class="btn btn-muted" id="cancelEditBtn" style="display:none">Cancelar</button>
                    </div>
                </div>

                <div class="row cols-5">
                    <div>
                        <label for="title">Título *</label>
                        <input id="title" placeholder="Checklist hangar 3" />
                        <div id="titleError" class="error">El título es obligatorio.</div>
                    </div>
                    <div>
                        <label for="dueDate">Fecha límite</label>
                        <input id="dueDate" type="date" />
                    </div>
                    <div>
                        <label for="priority">Prioridad</label>
                        <select id="priority">
                            <option>Alta</option>
                            <option selected>Media</option>
                            <option>Baja</option>
                        </select>
                    </div>
                    <div>
                        <label for="status">Estado</label>
                        <select id="status">
                            <option selected>Pendiente</option>
                            <option>En Proceso</option>
                            <option>Cerrada</option>
                        </select>
                    </div>
                    <div></div>
                    <div class="row cols-4" style="grid-column:1 / -1; gap:10px; margin-top:4px">
                        <div style="grid-column:1 / -1">
                            <label for="notes">Notas</label>
                            <textarea id="notes" rows="3" placeholder="Detalles opcionales"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lista -->
        <section class="card" style="margin-top:16px">
            <div class="body">
                <div class="titlebar">
                    <h2>Tareas</h2>
                    <span class="muted">Total: <span id="count">0</span></span>
                </div>
                <div class="table-head">
                    <div>Título</div>
                    <div>Estado</div>
                    <div>Prioridad</div>
                    <div>Vencimiento</div>
                    <div style="text-align:right">Acciones</div>
                </div>
                <div id="list"></div>
            </div>
        </section>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast ok"></div>

    <script>
        // Elementos
        const title = document.getElementById('title');
        const dueDate = document.getElementById('dueDate');
        const priority = document.getElementById('priority');
        const statusSel = document.getElementById('status');
        const notes = document.getElementById('notes');
        const titleError = document.getElementById('titleError');

        const formTitle = document.getElementById('formTitle');
        const saveBtn = document.getElementById('saveBtn');
        const saveEditBtn = document.getElementById('saveEditBtn');
        const cancelEditBtn = document.getElementById('cancelEditBtn');

        const count = document.getElementById('count');
        const list = document.getElementById('list');
        const toast = document.getElementById('toast');

        // Estado app
        let tasks = [
            { id: 101, title: 'Checklist hangar 1', status: 'Pendiente', priority: 'Media', dueDate: '2025-10-01' },
            { id: 102, title: 'Inspección rampa', status: 'En Proceso', priority: 'Alta', dueDate: '2025-09-30' },
            { id: 103, title: 'Briefing de seguridad', status: 'Cerrada', priority: 'Baja', dueDate: '2025-09-20' }
        ];
        let editing = null;

        // Utilidades UI
        function showToast(msg, type = 'ok') {
            toast.className = 'toast ' + (type === 'ok' ? 'ok' : 'warn');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 1600);
        }

        function resetForm() {
            title.value = '';
            dueDate.value = '';
            priority.value = 'Media';
            statusSel.value = 'Pendiente';
            notes.value = '';
            titleError.classList.remove('show');
        }

        function badge(status) {
            const span = document.createElement('span');
            span.className = 'badge ' + (status === 'Pendiente' ? 'b-pend' : status === 'En Proceso' ? 'b-proc' : 'b-cerr');
            span.textContent = status; return span;
        }

        function render() {
            count.textContent = tasks.length;
            list.innerHTML = '';
            tasks.forEach(t => {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
          <div>
            <div style="font-weight:600">${t.title}</div>
            <div class="id">#${t.id}</div>
          </div>
          <div data-slot="estado"></div>
          <div>${t.priority}</div>
          <div>${t.dueDate || '—'}</div>
          <div style="text-align:right">
            <div class="actions">
              <button class="btn btn-ghost" data-act="edit">Editar</button>
              <button class="btn btn-ghost" data-act="next" style="color:var(--emerald)">Avanzar</button>
            </div>
          </div>`;
                row.querySelector('[data-slot="estado"]').appendChild(badge(t.status));
                row.querySelector('[data-act="edit"]').addEventListener('click', () => startEdit(t));
                row.querySelector('[data-act="next"]').addEventListener('click', () => advanceStatus(t.id));
                list.appendChild(row);
            });
        }

        function createTask() {
            if (!title.value.trim()) {
                titleError.classList.add('show');
                showToast('El título es obligatorio', 'warn');
                return;
            }
            const newTask = {
                id: Math.max(...tasks.map(t => t.id)) + 1,
                title: title.value.trim(),
                status: statusSel.value,
                priority: priority.value,
                dueDate: dueDate.value || '',
                notes: notes.value || ''
            };
            tasks = [newTask, ...tasks];
            resetForm();
            showToast(`Tarea creada (#${newTask.id})`);
            render();
        }

        function startEdit(task) {
            editing = task;
            formTitle.textContent = 'Editar tarea';
            saveBtn.style.display = 'none';
            saveEditBtn.style.display = 'inline-flex';
            cancelEditBtn.style.display = 'inline-flex';

            title.value = task.title;
            dueDate.value = task.dueDate || '';
            priority.value = task.priority;
            statusSel.value = task.status;
            notes.value = task.notes || '';
        }

        function applyEdit() {
            if (!editing) return;
            if (!title.value.trim()) {
                titleError.classList.add('show');
                showToast('El título es obligatorio', 'warn');
                return;
            }
            tasks = tasks.map(t => t.id === editing.id ? {
                ...t,
                title: title.value.trim(),
                dueDate: dueDate.value || '',
                priority: priority.value,
                status: statusSel.value,
            } : t);
            editing = null;
            formTitle.textContent = 'Nueva tarea';
            saveBtn.style.display = 'inline-flex';
            saveEditBtn.style.display = 'none';
            cancelEditBtn.style.display = 'none';
            resetForm();
            showToast('Cambios guardados');
            render();
        }

        function cancelEdit() {
            editing = null;
            formTitle.textContent = 'Nueva tarea';
            saveBtn.style.display = 'inline-flex';
            saveEditBtn.style.display = 'none';
            cancelEditBtn.style.display = 'none';
            resetForm();
        }

        function advanceStatus(id) {
            const order = ['Pendiente', 'En Proceso', 'Cerrada'];
            tasks = tasks.map(t => {
                if (t.id !== id) return t;
                const i = order.indexOf(t.status);
                const next = order[(i + 1) % order.length];
                return { ...t, status: next };
            });
            showToast('Estado actualizado');
            render();
        }

        // Eventos
        saveBtn.addEventListener('click', createTask);
        saveEditBtn.addEventListener('click', applyEdit);
        cancelEditBtn.addEventListener('click', cancelEdit);

        // Init
        render();
    </script>
</body>

</html>